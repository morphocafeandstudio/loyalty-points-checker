<script>
    async function checkPoints() {
        let phone = document.getElementById("phone").value.trim();
        if (!phone) {
            alert("Please enter your phone number");
            return;
        }

        try {
            let response = await fetch(`https://script.google.com/macros/s/AKfycbwZitAJgy8-uk_zIVu0D2HNR6tXjmkUZVY_spMO62w/dev`);
            let data = await response.json();

            const resultEl = document.getElementById("result");

            if (data.error) {
                resultEl.innerText = data.error;
            } else {
                // Display Customer ID, Total Points, and Status
                resultEl.innerText = 
                    `Customer ID: ${data.customerID}\n` +
                    `Total Points: ${data.totalPoints}\n` +
                    `Status: ${data.status}`;
            }
        } catch (err) {
            console.error(err);
            document.getElementById("result").innerText = "Something went wrong. Try again later.";
        }
    }

    document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("phone").addEventListener("keypress", function (event) {
            if (event.key === "Enter") {
                checkPoints();
            }
        });
    });
</script>
