<script>
    async function checkPoints() {
        let phone = document.getElementById("phone").value.trim();
        if (!phone) {
            alert("Please enter your phone number");
            return;
        }

        try {
            let response = await fetch(`https://script.google.com/macros/s/AKfycby1lOJW3llFnED7nBdVoI2fiRLdcOrNgxem6SdHaWr2FqMOyt5ORT7Gpx96oO1Hn6ep/exec?phone=${phone}`);
            let data = await response.json();

            if (data.error) {
                document.getElementById("result").innerText = data.error;
            } else {
                document.getElementById("result").innerText = 
                    `Customer ID: ${data.customerID}\nTotal Points: ${data.totalPoints}\nStatus: ${data.status}`;
            }
        } catch (err) {
            document.getElementById("result").innerText = "Error fetching data. Please try again.";
            console.error(err);
        }
    }

    document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("phone").addEventListener("keypress", function (event) {
            if (event.key === "Enter") {
                checkPoints();
            }
        });
    });
</script>
